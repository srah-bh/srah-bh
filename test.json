name: 'CallDeployStorageAccount'

#Controls when the workflow will run
on:
  workflow_dispatch: 

permissions:
  id-token: write
  contents: read

jobs:      
  call-gbstorage-wf-in-local-repo:
    uses: BH-Corporate-Functions/BHCAzure_ReusableTemplates/.github/workflows/reusablestorage.yaml@v1.0 #use the latest version available for master
    with:
      branchname: master
      parametersFile: './ReusableRepo/StorageAccount/parameters/main.parameters.jsonc accountName="gbteststorage12345"' #you can eighter pass all the input or use a local parameter file. 
​​​​Please note, if you want to pass the local param file, the path name must start with 'CallerRepo/' example parametersFile: 'CallerRepo/parametergb/main.parameters.jsonc' this path refers to a parameters file stored in the caller repo
      env: sbx #specify the env to use
      azureRegion: eastus #region where to deploy the resource
      resourceGroup: RG-ALZ-POC-SandBox-EastUS #resource group where to deploy the resource
    secrets:
      SUBSCRIPTION_ID:  ${{ secrets.AZURE_SUBSCRIPTION_ID }} #secrets containing azure credential
      CLIENT_ID: ${{ secrets.AZURE_CLIENT_ID }}
      TENANT_ID: ${{ secrets.AZURE_TENANT_ID }}
      TOKEN_REUSABLE_TEMPLATE: ${{ secrets.TOKEN_REUSABLE_TEMPLATE }}  #secrets with the token that has access to this repo
